{"version":3,"sources":["components/BaseInput.js","components/ChineseName.js","components/TextareaInput.js","page/index/index.js","page/list/fakerData.js","page/list/Item.js","page/list/index.js","page/observerList/item.js","page/observerList/index.js","page/cardListEvent/fakerData.js","lib/utils.js","page/cardListEvent/Item.js","page/cardListEvent/index.js","page/cardListTimeout/fakerData.js","page/cardListTimeout/Item.js","page/cardListTimeout/index.js","page/cardListObserver/fakerData.js","page/cardListObserver/Item.js","page/cardListObserver/index.js","App.js","serviceWorker.js","index.js"],"names":["BaseInput","DOM","changeFn","left","display","width","right","boxSizing","this","props","onChange","e","type","style","label","value","height","children","React","Component","ChineseName","state","verification","bind","v","target","test","setState","color","TextareaInput","Index","playVideo","videoEl","current","play","coinList","coinRender","createRef","startX","diffY","bindPreventTouch","document","documentElement","addEventListener","preventDefault","init","ul","scrollWidth","touches","pageX","self","querySelector","console","log","scrollLeft","offsetWidth","removeEventListener","list","Array","keys","setTimeout","className","map","item","key","onClick","href","ref","src","poster","host","words","paragraphs","images","fakerData","start","pageSize","useImage","a","i","rw","Math","random","rh","push","id","image","trunc","undefined","faker","lorem","sentences","Item","cachePosition","node","index","List","startOffset","endOffset","visibleData","prevRenderData","listScrollTop","data","startIndex","endIndex","scrollTop","listRef","scrollTimer","cache","anchorItem","top","bottom","indexOffset","prevCache","loadPrev","timerLoad","handleTouchStart","handleTouchMove","handleTouchEnd","handleScroll","visibleCount","ceil","offsetHeight","updateVisibleData","beginPagY","pageY","currentPos","transform","length","concat","setInterval","clearInterval","bottomOffset","updateBoundaryIndex","scrollTo","rect","getBoundingClientRect","listDom","listRect","some","find","slice","marginTop","background","dom","wrapper","paddingTop","paddingBottom","showConter","observer","IntersectionObserver","entries","isIntersecting","root","getElementById","rootMargin","window","innerHeight","observe","unobserve","ObserverList","throttle","fn","wait","timer","context","args","arguments","apply","scrollHandle","viewHeight","clientHeight","viewHeightDouble","isExposed","showContent","alt","CardListEvnet","forEach","cacheRefs","CardListTimeout","exposedObserver","contentObserver","CardListObserver","App","route","location","hash","substr","Child","CardListEvent","Boolean","hostname","match","ReactDOM","render","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.17b350b2.chunk.js","sourcesContent":["import React from 'react';\r\n\r\n// 基础组件\r\nclass BaseInput extends React.Component {\r\n    render() {\r\n        let left = {display: 'inline-block', width: '100px'}\r\n        let right = {display: 'inline-block', width: '200px', boxSizing: 'border-box'}\r\n        let DOM\r\n        let changeFn\r\n        if (this.props.onChange) {\r\n            changeFn = e => {\r\n                this.props.onChange(e)\r\n            }\r\n        } else {\r\n            changeFn = () => {\r\n            }\r\n        }\r\n        // 首先，根据类型选择需要的输入框\r\n        if (this.props.type === 'input' | !this.props.type) {\r\n            DOM = <span>\r\n                <span style={left}>{this.props.label}</span>\r\n                <input style={right} type=\"text\"\r\n                       onChange={changeFn}\r\n                       value={this.props.value}/>\r\n            </span>\r\n        } else if (this.props.type === 'textarea') {\r\n            DOM = <span>\r\n                <span style={left}>{this.props.label}</span>\r\n                <textarea style={right} type=\"text\" onChange={changeFn}\r\n                          value={this.props.value}/>\r\n            </span>\r\n        }\r\n        return <div style={{height: '200px'}}>\r\n            {DOM}\r\n            {/* 其次，允许将额外补充内容添加到这里，实用this.props.children作为slot插槽 */}\r\n            {this.props.children}\r\n        </div>\r\n    }\r\n}\r\nexport default BaseInput;\r\n","import React from 'react';\r\nimport BaseInput from './BaseInput';\r\n\r\nclass ChineseName extends React.Component {\r\n    constructor(props) {\r\n        super(props)\r\n        this.state = {\r\n            value: ''\r\n        }\r\n        this.verification = this.verification.bind(this)\r\n    }\r\n\r\n    verification(e) {\r\n        let v = e.target.value\r\n        // 必须是中文字符\r\n        if (/[\\u4e00-\\u9fa5]/.test(v)) {\r\n            this.setState({\r\n                value: v\r\n            })\r\n        }\r\n    }\r\n\r\n    render() {\r\n        return <BaseInput label={'名字'}\r\n                          type={'input'}\r\n                          value={this.state.value}\r\n                          onChange={this.verification}>\r\n            <span style={{color: 'red'}}>只允许输入中文字符</span>\r\n        </BaseInput>\r\n    }\r\n}\r\n\r\nexport default ChineseName;","import React from 'react';\r\nimport BaseInput from './BaseInput';\r\n\r\nclass TextareaInput extends React.Component {\r\n    render() {\r\n        return <BaseInput label={'个人情况'} type={'textarea'}>\r\n            <span style={{color: 'red'}}>请务必填写</span>\r\n        </BaseInput>\r\n    }\r\n}\r\n\r\nexport default TextareaInput;","import React from 'react';\r\nimport './index.scss';\r\n\r\nimport ChineseName from '../../components/ChineseName';\r\nimport TextareaInput from '../../components/TextareaInput';\r\n\r\nclass Index extends React.Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      coinList: []\r\n    }\r\n    this.coinRender = this.coinRender.bind(this);\r\n    this.videoEl = React.createRef();\r\n  }\r\n\r\n  componentDidMount() {\r\n    let preventUCDefault = (function() {\r\n      let startX = 0;\r\n      let diffY = 0;\r\n      const bindPreventTouch = function() {\r\n        // console.log('bindPreventTouch')\r\n        document.documentElement.addEventListener('touchmove', function(e) {\r\n          e.preventDefault();\r\n        }, false);\r\n      };\r\n\r\n      return {\r\n        init : function(ul) {\r\n          // console.log(ul)\r\n          const scrollWidth = ul.scrollWidth;\r\n\r\n          ul.addEventListener('touchstart', function(e) {\r\n            // console.log('touchstart', e)\r\n              startX = e.touches[0].pageX;\r\n          });\r\n\r\n          ul.addEventListener('touchmove',function(e) {\r\n            const self = document.querySelector('.xscroll-box');\r\n            diffY = e.touches[0].pageX - startX;\r\n            console.log('touchmove', e, self.scrollLeft, diffY, scrollWidth - self.scrollLeft - ul.offsetWidth)\r\n            if(self.scrollLeft === 0 && diffY > 0) {\r\n              //到最左\r\n              bindPreventTouch();\r\n            }else if((scrollWidth - self.scrollLeft - ul.offsetWidth) < 1 && diffY < 0) {\r\n              //到最右\r\n              bindPreventTouch();\r\n            }\r\n          });\r\n\r\n          ul.addEventListener('touchend',function(e) {\r\n            // console.log('touchend')\r\n            document.documentElement.removeEventListener('touchmove', function(e) {\r\n              e.preventDefault();\r\n            });\r\n          });\r\n        }\r\n      }\r\n    })();\r\n    \r\n    \r\n    preventUCDefault.init(document.querySelector('.xscroll-box'));\r\n\r\n    // uc浏览器左右翻页的功能，好像这两句就解决了\r\n    // document.documentElement.addEventListener('touchmove', function(e) {\r\n    //   e.preventDefault();\r\n    // }, false);\r\n  }\r\n  coinRender() {\r\n    const list = [...new Array(6).keys()];\r\n    this.setState({ coinList: list });\r\n    setTimeout(() => {\r\n      this.setState({ coinList: [] });\r\n    }, 1000);\r\n  }\r\n  renderFly() {\r\n    return (\r\n      <div className=\"box\">\r\n        {\r\n          this.coinList.map(item => <i className={\"coin fly coin\" + item } key={item}></i>)\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n  playVideo = () => {\r\n    this.videoEl.current.play();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"page-index\">\r\n        <header className=\"header\">\r\n          <i className=\"coin\"></i>\r\n          100\r\n        </header>\r\n        <main className=\"header-btn\">\r\n          <button onClick={this.coinRender}>点我</button>\r\n          <div className=\"box\">\r\n            {\r\n              this.state.coinList.map(item => <i className={\"coin fly coin\" + item } key={item}></i>)\r\n            }\r\n          </div>\r\n        </main>\r\n        <h2>Router:------------------</h2>\r\n        <ul>\r\n          <li><a href=\"#list\">List</a></li>\r\n          <li><a href=\"#observerlist\">observerlist</a></li>\r\n          <li>card list ======= start</li>\r\n          <li><a href=\"#cardListEvent\">card list event</a></li>\r\n          <li><a href=\"#cardListTimeout\">card list timeout</a></li>\r\n          <li><a href=\"#cardListObserver\">card list observer</a></li>\r\n          <li>card list ======= end</li>\r\n        </ul>\r\n        <p>router end-----------------<br /><br /></p>\r\n        <ChineseName />\r\n        <TextareaInput />\r\n        <ul className=\"xscroll-box\">\r\n          <li>112</li>\r\n          <li>112</li>\r\n          <li>112</li>\r\n          <li>112</li>\r\n          <li>112</li>\r\n          <li>112</li>\r\n          <li>112</li>\r\n          <li>112</li>\r\n          <li>112</li>\r\n          <li>112</li>\r\n          <li>112</li>\r\n          <li>112</li>\r\n        </ul>\r\n        <div className=\"video-wrap\">\r\n          <video\r\n            ref={this.videoEl}\r\n            src=\"https://www.w3school.com.cn/i/movie.ogg\"\r\n            poster=\"https://timgsa.baidu.com/timg?image&quality=80&size=b9999_10000&sec=1574578866003&di=635859f0959d5053392e7f8bef507e60&imgtype=0&src=http%3A%2F%2F5b0988e595225.cdn.sohucs.com%2Fimages%2F20181118%2F506c96391e1d4b7f8a27baf23c902369.gif\"\r\n            width=\"300\"\r\n            height=\"200\"\r\n            onClick={this.playVideo}\r\n          ></video>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Index;\r\n","import faker from 'faker/locale/zh_CN'\r\n\r\n// const pageSize = 200\r\nconst host = 'http://picsum.photos'\r\n\r\nconst words = []\r\nconst paragraphs = []\r\nconst images = []\r\n\r\nfunction fakerData (start = 0, pageSize, useImage = true) {\r\n  const a = []\r\n  for (let i = start; i < start + pageSize; i++) {\r\n    const rw = (1 + Math.random()) * 100\r\n    const rh = (1 + Math.random()) * 100\r\n\r\n    a.push({\r\n      id: i,\r\n      image: useImage ? images[i] || (images[i] = `${host}/${Math.trunc(rw)}/${Math.trunc(rh)}`) : undefined,\r\n      words: words[i] || (words[i] = faker.lorem.words()),\r\n      paragraphs: paragraphs[i] || (paragraphs[i] = Math.random() <= 0.5 ? faker.lorem.paragraphs() : faker.lorem.sentences())\r\n    })\r\n  }\r\n\r\n  return a\r\n}\r\n\r\nexport default fakerData","  \r\nimport React, { Component } from 'react'\r\n\r\nexport default class Item extends Component {\r\n  componentDidMount () {\r\n    /* eslint-disable-next-line */\r\n    this.props.cachePosition(this.node, this.props.index)\r\n  }\r\n\r\n  render () {\r\n    /* eslint-disable-next-line */\r\n    const {index, item} = this.props\r\n\r\n    return (\r\n      <div className='list-item' style={{ height: 'auto' }} ref={node => { this.node = node }}>\r\n        <p>#{index} {item.words}说：</p>\r\n        <p>{item.paragraphs}</p>\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\nimport './index.scss';\r\nimport fakerData from './fakerData'\r\n\r\nimport Item from './Item'\r\n\r\n/**\r\n * 记录每个列表元素的高度和序号，动态移除列表元素，并使用列表的 paddingTop 和 paddingBottom 进行占位\r\n * 优化长列表性能\r\n */\r\n\r\nconst estimatedItemHeight = 80\r\nconst bufferSize = 5\r\nconst loadNum = 20; // 一次加载多少条\r\n\r\nclass List extends React.Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.state = {\r\n      startOffset: 0,\r\n      endOffset: 0,\r\n      visibleData: [],\r\n      prevRenderData: [], // 用于在屏幕外渲染item并测量高度\r\n      listScrollTop: 0,\r\n    }\r\n\r\n    this.data = fakerData(0, 200, false);\r\n\r\n    this.startIndex = 0\r\n    this.endIndex = 0\r\n    this.scrollTop = 0\r\n\r\n    this.listRef = null\r\n    this.scrollTimer = null;\r\n    // this.doc = null\r\n    // 缓存已渲染元素的位置信息\r\n    this.cache = []\r\n    // 缓存锚点元素的位置信息\r\n    this.anchorItem = {\r\n      index: 0, // 锚点元素的索引值\r\n      top: 0, // 锚点元素的顶部距离第一个元素的顶部的偏移量(即 startOffset)\r\n      bottom: 0 // 锚点元素的底部距离第一个元素的顶部的偏移量\r\n    }\r\n\r\n    this.indexOffset = 0; // 总数据的第一个index偏移量，由下拉加载更多引起\r\n    this.prevCache = [];\r\n    this.loadPrev = false;\r\n    this.timerLoad = null;\r\n\r\n    this.handleTouchStart = this.handleTouchStart.bind(this); // 监听下拉\r\n    this.handleTouchMove = this.handleTouchMove.bind(this); // 监听下拉\r\n    this.handleTouchEnd = this.handleTouchEnd.bind(this); // 监听下拉\r\n    this.handleScroll = this.handleScroll.bind(this)\r\n    this.cachePosition = this.cachePosition.bind(this)\r\n  }\r\n\r\n  componentDidMount () {\r\n    // 计算可渲染的元素个数\r\n    // this.visibleCount = Math.ceil(window.innerHeight / estimatedItemHeight) + bufferSize\r\n    if (!this.listRef) {\r\n      return;\r\n    }\r\n    this.visibleCount = Math.ceil(this.listRef.offsetHeight / estimatedItemHeight) + bufferSize\r\n    this.endIndex = this.startIndex + this.visibleCount\r\n    this.updateVisibleData()\r\n\r\n    this.listRef.addEventListener('scroll', this.handleScroll, false)\r\n    this.listRef.addEventListener('touchstart', this.handleTouchStart, false);\r\n    this.listRef.addEventListener('touchmove', this.handleTouchMove, false);\r\n    this.listRef.addEventListener('touchend', this.handleTouchEnd, false);\r\n  }\r\n\r\n  handleTouchStart (e) {\r\n    if (this.listRef.scrollTop !== 0) {\r\n      return\r\n    }\r\n    this.beginPagY = e.touches[0].pageY\r\n  }\r\n\r\n  handleTouchMove (e) {\r\n    if (this.listRef.scrollTop !== 0) {\r\n      return\r\n    }\r\n    this.currentPos = e.touches[0].pageY - this.beginPagY;\r\n    if (this.currentPos <= 0) {\r\n      return;\r\n    }\r\n    this.listRef.style.transform = `translateY(${this.currentPos < 30 ? this.currentPos : 30}px)`;\r\n  }\r\n\r\n  handleTouchEnd (e) {\r\n    if (this.currentPos > 30 && !this.loadPrev) {\r\n      // 开始加载\r\n      this.loadPrev = true;\r\n      this.setState({\r\n        prevRenderData: fakerData(this.data.length + 1 + loadNum, loadNum, false)\r\n      }, () => {\r\n        this.indexOffset += loadNum;\r\n        this.data = this.state.prevRenderData.concat(this.data);\r\n        // 轮询查看屏幕外测量是否完成\r\n        this.timerLoad = setInterval(() => {\r\n          if (this.prevCache.length >= loadNum) {\r\n            clearInterval(this.timerLoad);\r\n            const bottomOffset = this.prevCache[this.prevCache.length - 1].bottom;\r\n            // 存储偏移后的数据\r\n            this.cache = this.prevCache\r\n              .concat(this.cache.map(item => {\r\n                item.top += bottomOffset;\r\n                item.bottom += bottomOffset;\r\n                return item;\r\n              }));\r\n            // 更新视图\r\n            const scrollTop = this.listRef.scrollTop + bottomOffset + 1;\r\n            this.updateBoundaryIndex(scrollTop);\r\n            this.updateVisibleData();\r\n            this.prevCache = [];\r\n            this.listRef.scrollTo(0, scrollTop - 1);\r\n            this.setState({ prevRenderData: [] }, () => {\r\n              this.listRef.style.transform = 'translateY(0px)';\r\n              this.loadPrev = false;\r\n            });\r\n          }\r\n        }, 300);\r\n      });\r\n    } else {\r\n      this.listRef.style.transform = 'translateY(0px)';\r\n    }\r\n    this.beginPagY = 0;\r\n    this.currentPos = 0;\r\n  }\r\n\r\n  cachePosition (node, index) {\r\n    const rect = node.getBoundingClientRect();\r\n    const listDom = document.querySelector('#scrolltop-list');\r\n    const listRect = listDom.getBoundingClientRect();\r\n    const top = rect.top - listRect.top + listDom.scrollTop;\r\n    console.log('itme', index, top, rect.top, listRect.top)\r\n    // 在屏幕外渲染item并测量高度\r\n    if (this.loadPrev) {\r\n      this.prevCache.push({\r\n        index,\r\n        top,\r\n        bottom: top + rect.height,\r\n      });\r\n      return;\r\n    }\r\n    // 已在屏幕外渲染过并进行缓存，不需要再缓存\r\n    if (this.cache.some(item => item.index === index)) {\r\n      return;\r\n    }\r\n    this.cache.push({\r\n      index,\r\n      top,\r\n      bottom: top + rect.height\r\n    })\r\n  }\r\n\r\n  // 滚动事件处理函数\r\n  handleScroll (e) {\r\n    // if (!this.doc) {\r\n    //   // 兼容 iOS Safari/Webview\r\n    //   this.doc = window.document.body.scrollTop ? window.document.body : window.document.documentElement\r\n    // }\r\n    if (!this.listRef) {\r\n      return;\r\n    }\r\n\r\n    // const scrollTop = this.doc.scrollTop\r\n    const scrollTop = this.listRef.scrollTop\r\n    if (scrollTop > this.scrollTop) {\r\n      if (scrollTop > this.anchorItem.bottom) {\r\n        this.updateBoundaryIndex(scrollTop)\r\n        this.updateVisibleData()\r\n      }\r\n    } else if (scrollTop < this.scrollTop) {\r\n      if (scrollTop < this.anchorItem.top) {\r\n        this.updateBoundaryIndex(scrollTop)\r\n        this.updateVisibleData()\r\n      }\r\n    }\r\n\r\n    // 若滚动太快来不及渲染item，容易导致滚动到白屏部位，进行滚动校正\r\n    if (scrollTop > this.anchorItem.bottom) {\r\n      this.listRef.scrollTo(0, this.anchorItem.top)\r\n    }\r\n\r\n    this.scrollTop = scrollTop\r\n  }\r\n\r\n  // 计算 startIndex 和 endIndex\r\n  updateBoundaryIndex (scrollTop) {\r\n    scrollTop = scrollTop || 0\r\n    // 用户正常滚动下，根据 scrollTop 找到新的锚点元素位置\r\n    const anchorItem = this.cache.find(item => item.bottom >= scrollTop)\r\n    if (!anchorItem) {\r\n      // 滚的太快，找不到锚点元素，这个暂不处理\r\n      return\r\n    }\r\n\r\n    this.anchorItem = {\r\n      ...anchorItem\r\n    }\r\n\r\n    this.startIndex = this.anchorItem.index\r\n    this.endIndex = this.startIndex + this.visibleCount\r\n  }\r\n\r\n  updateVisibleData () {\r\n    const visibleData = this.data.slice(this.startIndex + this.indexOffset, this.endIndex + this.indexOffset)\r\n    this.setState({\r\n      startOffset: this.anchorItem.top,\r\n      endOffset: (this.data.length - (this.endIndex + this.indexOffset)) * estimatedItemHeight,\r\n      visibleData\r\n    })\r\n  }\r\n\r\n  render () {\r\n    const { startOffset, endOffset, visibleData, prevRenderData } = this.state\r\n\r\n    return (\r\n      <div className=\"big-page-list\" style={{ marginTop: '50px' }}>\r\n        <div style={{ height: '100px', background: 'red' }}></div>\r\n\r\n        {/* 虚拟列表 start */}\r\n        <div className=\"virtual-list\">\r\n          <div className=\"page-list\" id=\"scrolltop-list\" ref={dom => { this.listRef = dom; }}>\r\n            <div className=\"hidden-list\">\r\n              <div className='wrapper'>\r\n                {\r\n                  prevRenderData.map((item, index) => {\r\n                    return (\r\n                      <Item\r\n                        cachePosition={this.cachePosition}\r\n                        key={this.startIndex - prevRenderData.length + index}\r\n                        item={item}\r\n                        index={this.startIndex - prevRenderData.length + index}\r\n                      />\r\n                    )\r\n                  })\r\n                }\r\n              </div>\r\n            </div>\r\n            <div className='wrapper' ref={node => { this.wrapper = node }}>\r\n              <div style={{ paddingTop: `${startOffset}px`, paddingBottom: `${endOffset > 0 ? endOffset : 0}px` }}>\r\n                {\r\n                  visibleData.map((item, index) => {\r\n                    return (\r\n                      <Item\r\n                        cachePosition={this.cachePosition}\r\n                        key={this.startIndex + index}\r\n                        item={item}\r\n                        index={this.startIndex + index}\r\n                      />\r\n                    )\r\n                  })\r\n                }\r\n              </div>\r\n            </div>\r\n          </div>\r\n        </div>\r\n        {/* 虚拟列表 end */}\r\n\r\n        <div style={{ height: '100px', background: 'red' }} ></div>\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default List;\r\n","  import React, { Component } from 'react'\r\n\r\nexport default class Item extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      showConter: true,\r\n      height: 'auto',\r\n    };\r\n\r\n    this.node = null;\r\n    this.observer = null;\r\n  }\r\n\r\n  componentDidMount () {\r\n    this.observer = new IntersectionObserver((entries) => {\r\n      console.log(entries[0])\r\n      if (entries[0]) {\r\n        this.setState({ showConter: entries[0].isIntersecting });\r\n      }\r\n    }, {\r\n      root: document.getElementById('observer-list'),\r\n      rootMargin: `${window.innerHeight * 2}px`, // 上下2屏\r\n    });\r\n\r\n    if (this.node) {\r\n      this.setState({ height: this.node.offsetHeight }, () => {\r\n        this.observer.observe(this.node)\r\n      });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.observer.unobserve(this.node);\r\n  }\r\n\r\n  render () {\r\n    const { height, showConter } = this.state;\r\n    const { index, item } = this.props\r\n\r\n    return (\r\n      <div className='list-item' style={{ height }} ref={node => { this.node = node }}>\r\n        {\r\n          showConter ? (\r\n            <>\r\n              <p>#{index} {item.words}说：</p>\r\n              <p>{item.paragraphs}</p>\r\n            </>\r\n          ) : null\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\nimport './index.scss';\r\nimport fakerData from '../list/fakerData';\r\nimport Item from './item';\r\n\r\n/**\r\n * 使用 IntersectionObserver API 监听列表单元是否进入目标区域进行展示的列表\r\n * 优化长列表性能\r\n */\r\n\r\nexport default class ObserverList extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      list: fakerData(0, 200, false),\r\n    };\r\n  }\r\n\r\n  render() {\r\n    const { list } = this.state;\r\n    return (\r\n      <div className=\"page-observer-list\" style={{ marginTop: '50px' }}>\r\n        <div style={{ height: '100px', background: 'red' }}></div>\r\n\r\n        <div className=\"observer-list\" id=\"observer-list\">\r\n          {\r\n            list.map(item => <Item key={item.id} item={item} index={item.id}/>)\r\n          }\r\n        </div>\r\n\r\n        <div style={{ height: '100px', background: 'red' }} ></div>\r\n      </div>\r\n    );\r\n  }\r\n}","import faker from 'faker/locale/zh_CN'\r\n\r\n// const pageSize = 200\r\nconst host = 'http://picsum.photos'\r\n\r\nconst words = []\r\nconst paragraphs = []\r\nconst images = []\r\n\r\nfunction fakerData (start = 0, pageSize, useImage = true) {\r\n  const a = []\r\n  for (let i = start; i < start + pageSize; i++) {\r\n    const rw = (1 + Math.random()) * 100\r\n    const rh = (1 + Math.random()) * 100\r\n\r\n    a.push({\r\n      id: i,\r\n      image: useImage ? images[i] || (images[i] = `${host}/${Math.trunc(rw)}/${Math.trunc(rh)}`) : undefined,\r\n      words: words[i] || (words[i] = faker.lorem.words()),\r\n      paragraphs: paragraphs[i] || (paragraphs[i] = Math.random() <= 0.5 ? faker.lorem.paragraphs() : faker.lorem.sentences())\r\n    })\r\n  }\r\n\r\n  return a\r\n}\r\n\r\nexport default fakerData","/**\r\n * 节流函数\r\n * @param {function} fn 执行函数\r\n * @param {number} wait 等待时间\r\n */\r\nexport function throttle(fn, wait) {\r\n  let timer = null;\r\n  return function () {\r\n    const context = this;\r\n    const args = arguments;\r\n    if (!timer) {\r\n      timer = setTimeout(() => {\r\n        fn.apply(context, args);\r\n        timer = null;\r\n      }, wait);\r\n    }\r\n  }\r\n}","  \r\nimport React, { Component } from 'react'\r\n\r\nexport default class Item extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      height: 'auto',\r\n      showContent: true,\r\n      isExposed: false,\r\n    }\r\n    this.node = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.node) {\r\n      this.setState({ height: this.node.offsetHeight });\r\n    }\r\n  }\r\n\r\n  scrollHandle = () => {\r\n    const viewHeight = window.innerHeight || document.documentElement.clientHeight;\r\n    const viewHeightDouble = viewHeight * 5;\r\n    const {\r\n      top,\r\n      bottom,\r\n    } = this.node.getBoundingClientRect();\r\n    if (bottom >= 0 && top <= viewHeight && !this.state.isExposed) {\r\n      this.setState({ isExposed: true });\r\n      console.log('曝光打点:', this.props.index);\r\n    }\r\n    if (bottom >= -viewHeightDouble && top <= viewHeightDouble) {\r\n      if (!this.state.showContent) {\r\n        this.setState({ showContent: true });\r\n      }\r\n    } else {\r\n      if (this.state.showContent) {\r\n        this.setState({ showContent: false });\r\n      }\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { height, showContent, isExposed } = this.state;\r\n    const { index, item } = this.props;\r\n\r\n    return (\r\n      <div className='list-item' style={{ height }} ref={node => { this.node = node }}>\r\n        {\r\n          showContent ? (\r\n            <>\r\n              <p>#{index} {item.words}说：</p>\r\n              <p>{item.paragraphs}</p>\r\n              <div className={`img-wrap ${isExposed ? '' : 'gray-bg'}`}>\r\n                {isExposed ? <img src={item.image} alt=\"img\" /> : null}\r\n              </div>\r\n            </>\r\n          ) : null\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\nimport './index.scss';\r\nimport fakerData from './fakerData';\r\nimport { throttle } from '../../lib/utils';\r\n\r\nimport Item from './Item'\r\n\r\n\r\nclass CardListEvnet extends React.Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.children = [];\r\n    this.data = fakerData(0, 1000);\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('scroll', this.scrollHandle);\r\n    this.scrollHandle();\r\n  }\r\n\r\n  // 滚动执行函数\r\n  scrollHandle = throttle(() => {\r\n    this.children.forEach(item => {\r\n      item.scrollHandle();\r\n    })\r\n  }, 500)\r\n\r\n  // 记录 Item\r\n  cacheRefs = (item) => {\r\n    this.children.push(item);\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className=\"card-list card-list-event\">\r\n        {\r\n          this.data.map(item => (\r\n            <Item\r\n              key={item.id}\r\n              item={item}\r\n              index={item.id}\r\n              ref={this.cacheRefs}\r\n            />\r\n          ))\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CardListEvnet;\r\n","import faker from 'faker/locale/zh_CN'\r\n\r\n// const pageSize = 200\r\nconst host = 'http://picsum.photos'\r\n\r\nconst words = []\r\nconst paragraphs = []\r\nconst images = []\r\n\r\nfunction fakerData (start = 0, pageSize, useImage = true) {\r\n  const a = []\r\n  for (let i = start; i < start + pageSize; i++) {\r\n    const rw = (1 + Math.random()) * 100\r\n    const rh = (1 + Math.random()) * 100\r\n\r\n    a.push({\r\n      id: i,\r\n      image: useImage ? images[i] || (images[i] = `${host}/${Math.trunc(rw)}/${Math.trunc(rh)}`) : undefined,\r\n      words: words[i] || (words[i] = faker.lorem.words()),\r\n      paragraphs: paragraphs[i] || (paragraphs[i] = Math.random() <= 0.5 ? faker.lorem.paragraphs() : faker.lorem.sentences())\r\n    })\r\n  }\r\n\r\n  return a\r\n}\r\n\r\nexport default fakerData","  \r\nimport React, { Component } from 'react'\r\n\r\nexport default class Item extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      height: 'auto',\r\n      showContent: true,\r\n      isExposed: false,\r\n    }\r\n    this.node = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.node) {\r\n      this.setState({ height: this.node.offsetHeight });\r\n    }\r\n  }\r\n\r\n  scrollHandle = () => {\r\n    const viewHeight = window.innerHeight || document.documentElement.clientHeight;\r\n    const viewHeightDouble = viewHeight * 5;\r\n    const {\r\n      top,\r\n      bottom,\r\n    } = this.node.getBoundingClientRect();\r\n    if (bottom >= 0 && top <= viewHeight && !this.state.isExposed) {\r\n      this.setState({ isExposed: true });\r\n      console.log('曝光打点:', this.props.index);\r\n    }\r\n    if (bottom >= -viewHeightDouble && top <= viewHeightDouble) {\r\n      if (!this.state.showContent) {\r\n        this.setState({ showContent: true });\r\n      }\r\n    } else {\r\n      if (this.state.showContent) {\r\n        this.setState({ showContent: false });\r\n      }\r\n    }\r\n  }\r\n\r\n  render () {\r\n    const { height, showContent, isExposed } = this.state;\r\n    const { index, item } = this.props;\r\n\r\n    return (\r\n      <div className='list-item' style={{ height }} ref={node => { this.node = node }}>\r\n        {\r\n          showContent ? (\r\n            <>\r\n              <p>#{index} {item.words}说：</p>\r\n              <p>{item.paragraphs}</p>\r\n              <div className={`img-wrap ${isExposed ? '' : 'gray-bg'}`}>\r\n                {isExposed ? <img src={item.image} alt=\"img\" /> : null}\r\n              </div>\r\n            </>\r\n          ) : null\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\nimport './index.scss';\r\nimport fakerData from './fakerData';\r\nimport { throttle } from '../../lib/utils';\r\n\r\nimport Item from './Item'\r\n\r\n// TODO: 没完成，想清楚先\r\nclass CardListTimeout extends React.Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.children = [];\r\n    this.data = fakerData(0, 1000);\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.addEventListener('scroll', this.scrollHandle);\r\n    this.scrollHandle();\r\n  }\r\n\r\n  // 滚动执行函数\r\n  scrollHandle = throttle(() => {\r\n    console.log('scroll', this.children);\r\n    this.children.forEach(item => {\r\n      item.scrollHandle();\r\n    })\r\n  }, 500)\r\n\r\n  // 记录 Item\r\n  cacheRefs = (item) => {\r\n    this.children.push(item);\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className=\"card-list card-list-event\">\r\n        {\r\n          this.data.map(item => (\r\n            <Item\r\n              key={item.id}\r\n              item={item}\r\n              index={item.id}\r\n              ref={this.cacheRefs}\r\n            />\r\n          ))\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CardListTimeout;\r\n","import faker from 'faker/locale/zh_CN'\r\n\r\n// const pageSize = 200\r\nconst host = 'http://picsum.photos'\r\n\r\nconst words = []\r\nconst paragraphs = []\r\nconst images = []\r\n\r\nfunction fakerData (start = 0, pageSize, useImage = true) {\r\n  const a = []\r\n  for (let i = start; i < start + pageSize; i++) {\r\n    const rw = (1 + Math.random()) * 100\r\n    const rh = (1 + Math.random()) * 100\r\n\r\n    a.push({\r\n      id: i,\r\n      image: useImage ? images[i] || (images[i] = `${host}/${Math.trunc(rw)}/${Math.trunc(rh)}`) : undefined,\r\n      words: words[i] || (words[i] = faker.lorem.words()),\r\n      paragraphs: paragraphs[i] || (paragraphs[i] = Math.random() <= 0.5 ? faker.lorem.paragraphs() : faker.lorem.sentences())\r\n    })\r\n  }\r\n\r\n  return a\r\n}\r\n\r\nexport default fakerData","  \r\nimport React, { Component } from 'react';\r\nimport { throttle } from '../../lib/utils';\r\n\r\nexport default class Item extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      height: 'auto',\r\n      showContent: true,\r\n      isExposed: false,\r\n    }\r\n    this.node = null;\r\n    this.exposedObserver = null;\r\n    this.contentObserver = null;\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.exposedObserver = new IntersectionObserver(throttle((entries) => {\r\n      if (entries[0]) {\r\n        const isIntersecting = entries[0].isIntersecting;\r\n        if (isIntersecting && !this.state.isExposed) {\r\n          this.setState({ isExposed: true });\r\n          console.log('曝光打点:', this.props.index);\r\n        }\r\n      }\r\n    }, 500));\r\n    this.contentObserver = new IntersectionObserver(throttle((entries) => {\r\n      if (entries[0]) {\r\n        const isIntersecting = entries[0].isIntersecting;\r\n        this.setState({ showContent: isIntersecting });\r\n      }\r\n    }, 500), {\r\n      rootMargin: `${window.innerHeight * 5}px`, // 上下5屏\r\n    });\r\n\r\n    if (this.node) {\r\n      this.setState({ height: this.node.offsetHeight }, () => {\r\n        this.exposedObserver.observe(this.node);\r\n        this.contentObserver.observe(this.node);\r\n      });\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    this.exposedObserver.unobserve(this.node);\r\n    this.contentObserver.unobserve(this.node);\r\n  }\r\n\r\n  render () {\r\n    const { height, showContent, isExposed } = this.state;\r\n    const { index, item } = this.props;\r\n\r\n    return (\r\n      <div className='list-item' style={{ height }} ref={node => { this.node = node }}>\r\n        {\r\n          showContent ? (\r\n            <>\r\n              <p>#{index} {item.words}说：</p>\r\n              <p>{item.paragraphs}</p>\r\n              <div className={`img-wrap ${isExposed ? '' : 'gray-bg'}`}>\r\n                {isExposed ? <img src={item.image} alt=\"img\" /> : null}\r\n              </div>\r\n            </>\r\n          ) : null\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}","import React from 'react';\r\nimport './index.scss';\r\nimport fakerData from './fakerData';\r\n\r\nimport Item from './Item'\r\n\r\n\r\nclass CardListObserver extends React.Component {\r\n\r\n  constructor() {\r\n    super();\r\n    this.children = [];\r\n    this.data = fakerData(0, 1000);\r\n  }\r\n\r\n  render () {\r\n    return (\r\n      <div className=\"card-list card-list-observer\">\r\n        {\r\n          this.data.map(item => (\r\n            <Item\r\n              key={item.id}\r\n              item={item}\r\n              index={item.id}\r\n            />\r\n          ))\r\n        }\r\n      </div>\r\n    )\r\n  }\r\n}\r\n\r\nexport default CardListObserver;\r\n","import React from 'react';\nimport './App.css';\n\nimport Index from './page/index';\nimport List from './page/list';\nimport ObserverList from './page/observerList';\nimport CardListEvent from './page/cardListEvent';\nimport CardListTimeout from './page/cardListTimeout';\nimport CardListObserver from './page/cardListObserver';\n\nclass App extends React.Component {\n\n  constructor() {\n    super();\n    this.state = {\n      route: window.location.hash.substr(1),\n    }\n  }\n\n  componentDidMount() {\n    window.addEventListener('hashchange', () => {\n      this.setState({\n        route: window.location.hash.substr(1)\n      });\n    })\n  }\n\n  render() {\n    let Child\n    switch (this.state.route) {\n      case 'list': {\n        Child = List;\n        break;\n      }\n      case 'observerlist': {\n        Child = ObserverList;\n        break;\n      }\n      case 'cardListEvent': {\n        Child = CardListEvent;\n        break;\n      }\n      case 'cardListTimeout': {\n        Child = CardListTimeout;\n        break;\n      }\n      case 'cardListObserver': {\n        Child = CardListObserver;\n        break;\n      }\n      default: Child = Index;\n    }\n    return (\n      <div className=\"app\">\n        <Child />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './css/base.css'\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<App />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}